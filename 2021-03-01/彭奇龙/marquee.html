<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="js/vue.js"></script>
</head>

<body>
    <div id="box">
        <h1>跑马灯效果</h1>
        <div v-text="msg">《春晓》 作者：孟浩然 春眠不觉晓，处处闻啼鸟。夜来风雨声，花落知多少。</div>
        <br>
        <span>速度：</span> <input type="text" v-model="affair" @keyup="again(affair)">
        <br>
        <br>
        <button @click="start()">开始</button>
        <button @click="stop">停止</button>
    </div>
    <script>
        new Vue({
            el: '#box',
            data: {
                timer: null,
                msg: '《春晓》 作者：孟浩然 春眠不觉晓，处处闻啼鸟。夜来风雨声，花落知多少。',
                affair: 1000
            },
            methods: {
                start() {
                    var time = parseInt(this.affair);
                    console.log(this.timer);
                    if (this.timer != null) return;
                    console.log(time);
                    this.timer = setInterval(() => {
                        //获取到头的第一个字符
                        let start = this.msg.substring(0, 1);
                        //获取到后面的所有字符
                        let end = this.msg.substring(1);
                        //重新拼接得到新的字符串，并赋值给this.msg
                        this.msg = end + start;
                    }, time);

                },
                stop() {
                    //清除定时器
                    clearInterval(this.timer);
                    this.timer = null
                },
                again(time) {
                    clearInterval(this.timer);
                    this.timer = null;
                    this.affair = time;
                    this.start();
                }
            }
        })
    </script>
</body>

</html>